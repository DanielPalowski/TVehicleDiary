@page
@model RegisterModel
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer

@{
    ViewData["Title"] = Localizer["RegisterTitle"];
}

<!DOCTYPE html>
<html lang="@System.Globalization.CultureInfo.CurrentUICulture.Name">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@Localizer["RegisterTitle"]</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                background: 'hsl(0, 0%, 99%)',
                foreground: 'hsl(222, 47%, 11%)',
                card: 'hsl(0, 0%, 100%)',
                'card-foreground': 'hsl(222, 47%, 11%)',
                primary: 'hsl(160, 84%, 39%)',
                'primary-foreground': 'hsl(0, 0%, 100%)',
                secondary: 'hsl(215, 20%, 95%)',
                'secondary-foreground': 'hsl(222, 47%, 11%)',
                muted: 'hsl(215, 20%, 96%)',
                'muted-foreground': 'hsl(215, 16%, 47%)',
                accent: 'hsl(160, 84%, 39%)',
                border: 'hsl(215, 20%, 91%)',
              },
              fontFamily: {
                heading: ['Space Grotesk', 'sans-serif'],
                body: ['Inter', 'sans-serif'],
              },
              boxShadow: {
                'soft': '0 4px 24px -2px rgba(30, 41, 59, 0.08)',
                'elevated': '0 12px 40px -8px rgba(30, 41, 59, 0.12)',
              },
            },
          },
        }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: hsl(0, 0%, 99%);
            color: hsl(222, 47%, 11%);
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Space Grotesk', sans-serif;
        }

        .gradient-text {
            background: linear-gradient(135deg, hsl(160, 84%, 39%) 0%, hsl(172, 66%, 50%) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-primary-gradient {
            background: linear-gradient(135deg, hsl(160, 84%, 39%) 0%, hsl(172, 66%, 50%) 100%);
            transition: all 0.2s ease;
        }

            .btn-primary-gradient:hover {
                box-shadow: 0 0 20px rgba(16, 185, 129, 0.2);
                transform: translateY(-1px);
            }

        .glass-card {
            background: white;
            border-radius: 16px;
            border: 1px solid hsl(215, 20%, 91%);
        }

        .input-field {
            transition: all 0.2s ease;
        }

            .input-field:focus {
                box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.1);
                border-color: hsl(160, 84%, 39%);
            }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-background via-white to-secondary">
    <!-- Simple Background -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-0 right-0 w-1/3 h-1/3 rounded-full opacity-10" style="background: radial-gradient(circle, hsl(160, 84%, 39%), transparent);"></div>
        <div class="absolute bottom-0 left-0 w-1/3 h-1/3 rounded-full opacity-10" style="background: radial-gradient(circle, hsl(172, 66%, 50%), transparent);"></div>
    </div>

    <div class="min-h-screen flex flex-col lg:flex-row">
        <!-- Left Side - Branding -->
        <div class="lg:w-1/2 bg-gradient-to-br from-foreground to-gray-900 p-8 lg:p-12 flex flex-col justify-between">
            <div>
                <a href="/" class="flex items-center gap-3 mb-8 lg:mb-12">
                    <div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background: linear-gradient(135deg, hsl(160, 84%, 39%), hsl(172, 66%, 50%));">
                        <i data-lucide="car" class="w-5 h-5 text-white"></i>
                    </div>
                    <span class="text-2xl font-bold text-white">VehicleDiary</span>
                </a>

                <div class="mt-8 lg:mt-16">
                    <h1 class="text-4xl lg:text-5xl font-bold text-white mb-6">
                        @Localizer["CreateAccountTitle"]<br>
                        <span class="gradient-text">VehicleDiary</span>
                    </h1>
                    <p class="text-gray-300 text-lg mb-8 max-w-md">
                        @Localizer["CreateAccountSubtitle"]
                    </p>

                    <!-- Features List -->
                    <div class="space-y-4">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg flex items-center justify-center" style="background: hsla(160, 84%, 39%, 0.2);">
                                <i data-lucide="shield-check" class="w-4 h-4" style="color: hsl(160, 84%, 39%);"></i>
                            </div>
                            <span class="text-gray-300">@Localizer["FeatureCompleteTracking"]</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg flex items-center justify-center" style="background: hsla(160, 84%, 39%, 0.2);">
                                <i data-lucide="bar-chart" class="w-4 h-4" style="color: hsl(160, 84%, 39%);"></i>
                            </div>
                            <span class="text-gray-300">@Localizer["FeatureFuelInsights"]</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg flex items-center justify-center" style="background: hsla(160, 84%, 39%, 0.2);">
                                <i data-lucide="bell" class="w-4 h-4" style="color: hsl(160, 84%, 39%);"></i>
                            </div>
                            <span class="text-gray-300">@Localizer["FeatureSmartReminders"]</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer on Left Side -->
            <div class="mt-8 pt-8 border-t border-white/10">
                <p class="text-gray-400 text-sm">
                    @Localizer["Copyright"]
                </p>
            </div>
        </div>

        <!-- Right Side - Register Form -->
        <div class="lg:w-1/2 p-8 lg:p-12 flex items-center justify-center">
            <div class="w-full max-w-md">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-foreground mb-2">@Localizer["SignUp"]</h2>
                    <p class="text-muted-foreground">@Localizer["CreateAccountSubtitle"]</p>
                </div>

                <!-- Register Card -->
                <div class="glass-card rounded-2xl p-8 shadow-elevated">
                    <form id="registerForm" asp-route-returnUrl="@Model.ReturnUrl" method="post" class="space-y-6">
                        <div asp-validation-summary="ModelOnly" class="text-sm text-red-500 bg-red-50 p-3 rounded-lg" role="alert"></div>

                        <!-- Email Field -->
                        <div class="space-y-2">
                            <label asp-for="Input.Email" class="block text-sm font-medium text-foreground">
                                @Localizer["EmailLabel"]
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i data-lucide="mail" class="w-5 h-5 text-muted-foreground"></i>
                                </div>
                                <input asp-for="Input.Email"
                                       class="pl-10 w-full px-4 py-3 rounded-xl border border-border bg-white focus:outline-none input-field"
                                       autocomplete="username"
                                       aria-required="true"
                                       placeholder="@Localizer["EmailPlaceholder"]" />
                            </div>
                            <span asp-validation-for="Input.Email" class="text-sm text-red-500"></span>
                        </div>

                        <!-- Password Field -->
                        <div class="space-y-2">
                            <label asp-for="Input.Password" class="block text-sm font-medium text-foreground">
                                @Localizer["PasswordLabel"]
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i data-lucide="lock" class="w-5 h-5 text-muted-foreground"></i>
                                </div>
                                <input asp-for="Input.Password"
                                       class="pl-10 w-full px-4 py-3 rounded-xl border border-border bg-white focus:outline-none input-field"
                                       autocomplete="new-password"
                                       aria-required="true"
                                       placeholder="@Localizer["PasswordPlaceholder"]" />
                            </div>
                            <span asp-validation-for="Input.Password" class="text-sm text-red-500"></span>

                            <!-- Simple Password Requirements Text -->
                            <div class="mt-3">
                                <p class="text-xs text-muted-foreground mb-1">@Localizer["PasswordRequirements"]:</p>
                                <ul class="text-xs text-muted-foreground space-y-1 ml-2">
                                    <li class="flex items-center gap-2">
                                        <i data-lucide="check" class="w-3 h-3"></i>
                                        <span>@Localizer["RequirementLength"]</span>
                                    </li>
                                    <li class="flex items-center gap-2">
                                        <i data-lucide="check" class="w-3 h-3"></i>
                                        <span>@Localizer["RequirementUppercase"]</span>
                                    </li>
                                    <li class="flex items-center gap-2">
                                        <i data-lucide="check" class="w-3 h-3"></i>
                                        <span>@Localizer["RequirementDigit"]</span>
                                    </li>
                                    <li class="flex items-center gap-2">
                                        <i data-lucide="check" class="w-3 h-3"></i>
                                        <span>@Localizer["RequirementSpecial"]</span>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- Confirm Password Field -->
                        <div class="space-y-2">
                            <label asp-for="Input.ConfirmPassword" class="block text-sm font-medium text-foreground">
                                @Localizer["ConfirmPasswordLabel"]
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i data-lucide="lock" class="w-5 h-5 text-muted-foreground"></i>
                                </div>
                                <input asp-for="Input.ConfirmPassword"
                                       class="pl-10 w-full px-4 py-3 rounded-xl border border-border bg-white focus:outline-none input-field"
                                       autocomplete="new-password"
                                       aria-required="true"
                                       placeholder="@Localizer["ConfirmPasswordPlaceholder"]" />
                            </div>
                            <span asp-validation-for="Input.ConfirmPassword" class="text-sm text-red-500"></span>
                        </div>

                        <!-- Terms Agreement -->
                        <div class="flex items-start space-x-3 pt-2">
                            <input type="checkbox" id="terms" name="terms" required
                                   class="w-4 h-4 mt-1 rounded border-border focus:ring-0 focus:ring-offset-0"
                                   style="accent-color: hsl(160, 84%, 39%);" />
                            <label for="terms" class="text-sm text-muted-foreground">
                                @Localizer["AgreeTerms1"] <a asp-controller="Terms" asp-action="Index" class="font-medium hover:underline" style="color: hsl(160, 84%, 39%);">@Localizer["TermsOfService"]</a> @Localizer["And"] <a asp-controller="Terms" asp-action="Index" class="font-medium hover:underline" style="color: hsl(160, 84%, 39%);">@Localizer["PrivacyPolicy"]</a>
                            </label>
                        </div>

                        <!-- Submit Button -->
                        <button id="registerSubmit" type="submit"
                                class="w-full btn-primary-gradient text-white font-semibold px-6 py-3 rounded-xl text-lg transition-all duration-200 shadow-lg flex items-center justify-center gap-2 mt-6">
                            <i data-lucide="user-plus" class="w-5 h-5"></i>
                            <span id="submitText">@Localizer["CreateAccountButton"]</span>
                        </button>

                        <!-- Divider -->
                        @if ((Model.ExternalLogins?.Count ?? 0) > 0)
                        {
                            <div class="relative my-6">
                                <div class="absolute inset-0 flex items-center">
                                    <div class="w-full border-t border-border"></div>
                                </div>
                                <div class="relative flex justify-center text-sm">
                                    <span class="px-4 bg-white text-muted-foreground">@Localizer["OrSignUpWith"]</span>
                                </div>
                            </div>

                            <!-- External Logins -->
                            <form id="external-account" asp-page="./ExternalLogin" asp-route-returnUrl="@Model.ReturnUrl" method="post">
                                <div class="grid grid-cols-2 gap-3">
                                    @foreach (var provider in Model.ExternalLogins!)
                                    {
                                        <button type="submit"
                                                class="w-full px-4 py-3 rounded-xl border border-border bg-white hover:bg-secondary transition-colors duration-200 flex items-center justify-center gap-2"
                                                name="provider"
                                                value="@provider.Name"
                                                title="@Localizer["SignUpWith"] @provider.DisplayName">
                                            @if (provider.Name == "Google")
                                            {
                                                <i data-lucide="mail" class="w-5 h-5"></i>
                                            }
                                            else if (provider.Name == "Microsoft")
                                            {
                                                <i data-lucide="windows" class="w-5 h-5"></i>
                                            }
                                            else
                                            {
                                                <i data-lucide="user" class="w-5 h-5"></i>
                                            }
                                            <span class="text-sm font-medium">@provider.DisplayName</span>
                                        </button>
                                    }
                                </div>
                            </form>
                        }

                        <!-- Login Link -->
                        <div class="text-center pt-4">
                            <p class="text-muted-foreground">
                                @Localizer["AlreadyHaveAccount"]
                                <a asp-page="./Login" asp-route-returnUrl="@Model.ReturnUrl"
                                   class="font-semibold hover:underline ml-1" style="color: hsl(160, 84%, 39%);">
                                    @Localizer["SignInHere"]
                                </a>
                            </p>
                        </div>
                    </form>
                </div>

                <!-- Mobile Footer -->
                <div class="mt-8 pt-6 border-t border-border lg:hidden">
                    <p class="text-center text-muted-foreground text-sm">
                        @Localizer["Copyright"]
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Minimal JavaScript - Just initialize icons -->
    <script>
        // Only initialize Lucide icons - no heavy validation logic
        lucide.createIcons();
    </script>

    <partial name="_ValidationScriptsPartial" />
</body>
</html>